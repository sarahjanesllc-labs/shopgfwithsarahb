!function(t){{var e=Backbone.Model.extend({"default":{title:"product title",caption:"product caption",price:0,images:[],quantity:0}}),n=Backbone.Collection.extend({model:e}),i=Backbone.View.extend({tagName:"li",events:{"click button.addOne":"addOne","click button.remove":"remove"},initialize:function(){_.bindAll(this,"render","addOne","remove"),this.model.bind("change",this.render)},render:function(){return t(this.el).html("<li>"+this.model.get("title")+"amount: "+this.model.get("quantity")+'<button class="addOne">+</button><button class="remove">-</button></li>'),this},addOne:function(){this.model.set({quantity:this.model.get("quantity")+1})},remove:function(){this.model.set({quantity:this.model.get("quantity")-1})}}),d=Backbone.View.extend({el:t("body"),events:{"click button.newProduct":"addProduct"},initialize:function(){_.bindAll(this,"render"),this.collection=new n,this.collection.bind("add",this.appendProduct),this.render()},addProduct:function(){var t=new e;t.set({title:"banana bread",quantity:0}),this.collection.add(t)},appendProduct:function(e){var n=new i({model:e});t("ul",this.el).append(n.render().el)},render:function(){t(this.el).append("<button class='newProduct'>New product</button>"),t(this.el).append("<ul></ul>")}});new d}}(jQuery);